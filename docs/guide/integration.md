# Project Integration

After simply processing the data generated by Mocha, you can call the macaca-reporter/lib/render method to generate the reporter.

## Get Data

After each test case is completed in Mocha, the data is processed and the data is finally output locally.

code：

```javascript
const handleTestEnd = (isEnd) => {
  const obj = getSuiteData(isEnd);
  obj.stats.duration = obj.suites._totalTime || 0;
  this.output = obj;
};

this.done = (failures, exit) => done(this.output, this.config, failures, exit);

runner.on('start', () => {
  this._originSuiteData = runner.suite;
});

runner.on('test end', test => {
  test.uuid = uuid();
  handleTestEnd();
});

runner.once('end', () => {
  handleTestEnd(true);
  self.epilogue.bind(self);
});
```

code: [uitest](https://github.com/macacajs/uitest)：
[start](https://github.com/macacajs/uitest/blob/master/mocha.js#L3816) - [end](https://github.com/macacajs/uitest/blob/master/mocha.js#L4083)

## Reporter

After the data is generated, the reporter page is rendered by the render method:

```javascript
  const render = require('macaca-reporter/lib/render');
  const data = require('./reports/json-final');
  render(data);
```

code：[Hilo](https://github.com/hiloteam/Hilo/blob/dev/gulpfile.js#L287)

